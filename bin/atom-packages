#!/bin/bash

packages() {
  # remove version numbers because it generates too much noise, also blank lines
  apm list -b -i --no-dev | sed -e 's/@.*$//' -e '/^\s*$/d'
}

if [ "$1" == 'update' ]; then
  packages > ~/.atom/packages.list
else
  diff -u ~/.atom/packages.list <(packages)
fi
